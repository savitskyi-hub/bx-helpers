BX.namespace("SavitskyiHub.BxHelpers.Helpers.Content.FixedBlockOnScroll");(function(){SavitskyiHub.BxHelpers.Helpers.Content.FixedBlockOnScroll={obListFixedBlock:{},debugMessage:[],init:function(a){let obList={},obFixedListBlock={},arFunction=[],arFuncProp={},j,p,prop,containerNode,scrollBlockNode,parentStaticBlockNode,whoNode,who2toNode,scrollingTagNode;if(a!==undefined&&BX.type.isPlainObject(a)){obList=a}else{if(BX.type.isPlainObject(this.obListFixedBlock)&&BX.type.isNotEmptyObject(this.obListFixedBlock)){obList=this.obListFixedBlock}}if(BX.type.isNotEmptyObject(obList)){for(p in obList){prop=obList[p];containerNode=document.querySelector(prop.container);scrollBlockNode=document.querySelector(prop.scrollBlock);parentStaticBlockNode=document.querySelector(prop.parentStaticBlock);whoNode=document.querySelector(prop.who);who2toNode=document.querySelector(prop.who2to);scrollingTagNode=document.querySelector(prop.scrollingTag);if(!obList.hasOwnProperty(p)){continue}else{if(!containerNode){this.debugMessage.push('Selector "'+prop.container+'" is not find');continue}else{if(!scrollBlockNode){this.debugMessage.push('Selector "'+prop.scrollBlock+'" is not find');continue}else{if(!parentStaticBlockNode){this.debugMessage.push('Selector "'+prop.parentStaticBlock+'" is not find');continue}else{if(!whoNode){this.debugMessage.push('Selector "'+prop.who+'" is not find');continue}else{if(!who2toNode){this.debugMessage.push('Selector "'+prop.who2to+'" is not find');continue}else{if(typeof(prop.scrollingTag)=="boolean"&&prop.scrollingTag){this.debugMessage.push('Param "scrollingTag" in method must be empty');continue}else{if(typeof(prop.scrollingTag)=="string"&&!scrollingTagNode){this.debugMessage.push('Selector "'+prop.scrollingTag+'" is not find');continue}}}}}}}}containerNode.style.minHeight=scrollBlockNode.offsetHeight+"px";arFunction[p]=function(b){arFuncProp=obList[b];let scrollingTagNode=document.querySelector(arFuncProp.scrollingTag),scrollBlockNode=document.querySelector(arFuncProp.scrollBlock),containerNode=document.querySelector(arFuncProp.container),parentStaticBlockNode=document.querySelector(arFuncProp.parentStaticBlock),whoNode=document.querySelector(arFuncProp.who),who2toNode=document.querySelector(arFuncProp.who2to);let namespace=BX.Local.Helpers.Content.FixedBlockOnScroll,scrollTop,scrollBlockCompensateMargin,scrollBlockHight,scrollBlockOffetTop,scrollBlockOffetBottom,containerCompensateMargin,containerHeight,containerOffsetTop,containerOffsetBottom,parentStaticBlockWidth,parentStaticOffsetTop,isGoodStructure;scrollTop=(!arFuncProp.scrollingTag?pageYOffset:scrollingTagNode.scrollTop);if(window.innerWidth<arFuncProp.stopOnWidth){return}else{if(!scrollBlockNode){return}}scrollBlockCompensateMargin=namespace.getMarginCompensate(scrollBlockNode);scrollBlockHight=scrollBlockNode.offsetHeight;scrollBlockOffetTop=Math.floor(scrollBlockNode.getBoundingClientRect().top+scrollBlockCompensateMargin);scrollBlockOffetBottom=scrollBlockOffetTop+scrollBlockHight;containerCompensateMargin=namespace.getMarginCompensate(containerNode);containerHeight=containerNode.offsetHeight;containerOffsetTop=Math.floor(containerNode.getBoundingClientRect().top+containerCompensateMargin);containerOffsetBottom=parseInt(containerOffsetTop+containerHeight);parentStaticBlockWidth=parentStaticBlockNode.offsetWidth;parentStaticOffsetTop=Math.floor(containerNode.getBoundingClientRect().top+containerCompensateMargin);isGoodStructure=(containerHeight>scrollBlockHight&&whoNode.offsetHeight<who2toNode.offsetHeight);if(0>=scrollBlockOffetTop&&isGoodStructure){scrollBlockNode.classList.add("fixed-start")}if(parentStaticOffsetTop>scrollBlockOffetTop){scrollBlockNode.classList.remove("fixed-start");scrollBlockNode.removeAttribute("style")}if(scrollBlockOffetBottom>=containerOffsetBottom&&isGoodStructure){scrollBlockNode.classList.add("fixed-stop");scrollBlockNode.style.top=parseInt(containerHeight-scrollBlockHight)+"px"}else{if(!scrollBlockNode.classList.contains("fixed-stop")){if(scrollBlockHight>containerOffsetBottom){scrollBlockNode.classList.add("fixed-stop");scrollBlockNode.style.top=parseInt(containerHeight-scrollBlockHight)+"px"}}}if(scrollBlockNode.classList.contains("fixed-stop")&&0<scrollBlockOffetTop){scrollBlockNode.classList.remove("fixed-stop");scrollBlockNode.removeAttribute("style")}if(scrollBlockNode.classList.contains("fixed-start")&&!scrollBlockNode.classList.contains("fixed-stop")){scrollBlockNode.style.width=parentStaticBlockWidth+"px"}}}if(typeof(arFunction)!=="undefined"){for(j in arFunction){if(!obList[j].scrollingTag){window.addEventListener("scroll",function(){arFunction[j](j)})}else{document.querySelector(obList[j].scrollingTag).onscroll=function(){arFunction[j](j)}}window.addEventListener("resize",function(){arFunction[j](j)})}}}},getMarginCompensate:function(a){let marginTop=parseInt(getComputedStyle(a)["margin-top"]);if(marginTop){if(marginTop>0){return marginTop*-1}else{if(marginTop<0){return marginTop}else{return 0}}}else{return 0}}}})();