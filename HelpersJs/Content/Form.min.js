BX.namespace("SavitskyiHub.BxHelpers.Helpers.Content.Form");(function(){BX.SavitskyiHub.BxHelpers.Helpers.Content.Form={debugMessage:[],FormInit:function(){this.FormCheckFields();this.FormCheckWebForm();this.FormSubmitAjaxControl();BX.addCustomEvent("onajaxsuccessfinish",BX.delegate(function(){this.FormCheckFields();this.FormCheckWebForm()},this))},FormGetFieldsValue:function(a){return BX.ajax.prepareForm(a).data},FormGetFormNode:function(){if(undefined!=this.namespace){var a=BX.findChild(BX("bx-html"),{tag:"FORM",attrs:{name:this.namespace}},true);if(null!=a){return a}}return null},FormCheckFields:function(){var c=[],b,a=BX.findChildren(BX("bx-html"),{className:"helpers-form"},true);if(null!=a){a.forEach(BX.delegate(function(d){BX.findChildren(d,BX.delegate(function(f){b=f.tagName;if(undefined!=b){if("INPUT"==b||"TEXTAREA"==b){if("INPUT"==b&&0>["text","number","password","hidden"].indexOf(f.type)){return false}if(f.required||(f.pattern&&f.pattern.length)){c.push(f)}}}},this),true)},this));c.forEach(function(d){$(d).off();BX.bind(d,"invalid",BX.delegate(function(e){return e.preventDefault()},this));BX.bind(d,"keyup",BX.delegate(function(){if(!BX.hasClass(d,"helpers-filled")&&d.value.length){BX.addClass(d,"helpers-filled")}else{if(!d.value.length){BX.removeClass(d,"helpers-filled")}}},this))})}},FormCheckWebForm:function(){var b,a=BX.findChildren(BX("bx-html"),{className:"helpers-form"},true);if(null!=a){a.forEach(BX.delegate(function(c){BX.findChildren(c,BX.delegate(function(d){b=d.tagName;if(undefined!=b&&"INPUT"==b&&"submit"==d.type){BX.bind(d,"click",BX.delegate(function(){this.FormEnableValidation(d)},this));BX.bind(d,"touch",BX.delegate(function(){this.FormEnableValidation(d)},this))}if(undefined!=b&&("INPUT"==b||"TEXTAREA"==b)){d.value.length?BX.addClass(d,"helpers-filled"):BX.removeClass(d,"helpers-filled");BX.bind(d,"keyup",BX.delegate(function(){d.value.length?BX.addClass(d,"helpers-filled"):BX.removeClass(d,"helpers-filled")},this))}return false},this),true)},this))}},FormEnableValidation:function(a){var b=BX.findParent(a,{tag:"FORM"},true);if(null!=b){BX.addClass(b,"helpers-validation")}},FormSubmitAjaxControl:function(){$(document).ajaxSend(BX.delegate(function(){this.FormSubmitDisabled()},this)).ajaxSuccess(BX.delegate(function(){this.FormSubmitEnabled()},this)).ajaxError(BX.delegate(function(){this.FormSubmitEnabled()},this))},FormSubmitDisabled:function(){var b=BX.findChildren(BX("bx-html"),{className:"helpers-form"},true),a;if(null!=b){b.forEach(function(c){a=BX.findChild(c,{tag:"INPUT",attrs:{type:"submit"}},true);if(null!=a){a.disabled=true}})}},FormSubmitEnabled:function(){var b=BX.findChildren(BX("bx-html"),{className:"helpers-form"},true),a;if(null!=b){b.forEach(function(c){a=BX.findChild(c,{tag:"INPUT",attrs:{type:"submit"}},true);if(null!=a){a.disabled=false}})}},FormShowError:function(a){var c,b=this.FormGetFormNode();if(null!=b){c=BX.findChild(b,{className:"helpers-form-error"},true);if(null!=c){c.textContent=a}}},FormCleanError:function(){var b,a=this.FormGetFormNode();if(null!=a){b=BX.findChild(a,{className:"helpers-form-error"},true);if(null!=b){b.textContent=""}}},FormRefreshCaptcha:function(){var a,b=this.FormGetFormNode();if(null!=b){a=BX.findChild(b,{className:"helpers-form-captcha"},true);if(null!=a){BX.SavitskyiHub.BxHelpers.Helpers.Content.Base.refreshCaptcha(a)}}},FormUpdateEvent:function(){setTimeout(BX.delegate(function(){this.FormCheckWebForm();this.FormCheckFields();if("function"===typeof(helpersContenFormUpdateEvent)){helpersContenFormUpdateEvent()}},this),250)}};BX.ready(function(){BX.SavitskyiHub.BxHelpers.Helpers.Content.Form.FormInit()})})();