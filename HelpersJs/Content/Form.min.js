(function(a){if(!!a.BX.SavitskyiHub.BxHelpers.Helpers.Content.Form){return}BX.namespace("SavitskyiHub.BxHelpers.Helpers.Content.Form");BX.SavitskyiHub.BxHelpers.Helpers.Content.Form={debugMessage:[],FormInit:function(){this.FormCheckFields();this.FormCheckWebForm();this.FormSubmitAjaxControl();BX.addCustomEvent("onajaxsuccessfinish",BX.delegate(function(){this.FormCheckFields();this.FormCheckWebForm()},this))},FormGetFieldsValue:function(b){return BX.ajax.prepareForm(b).data},FormGetFormNode:function(){if(undefined!=this.namespace){var b=BX.findChild(BX("bx-html"),{tag:"FORM",attrs:{name:this.namespace}},true);if(null!=b){return b}}return null},FormCheckFields:function(){var d=[],c,b=BX.findChildren(BX("bx-html"),{className:"helpers-form"},true);if(null!=b){b.forEach(BX.delegate(function(e){BX.findChildren(e,BX.delegate(function(f){c=f.tagName;if(undefined!=c){if("INPUT"==c||"TEXTAREA"==c||"SELECT"==c){if(f.required||(f.pattern&&f.pattern.length)){if("INPUT"==c&&0>["text","email","number","password","hidden","radio"].indexOf(f.type)){return false}d.push(f)}}}},this),true)},this));d.forEach(function(f){if("SELECT"!=f.tagName){$(f).attr("autocomplete","off")}BX.bind(f,"invalid",BX.delegate(function(e){return e.preventDefault()},this));if("Y"!=BX.data(f,"helpers-filled")){BX.data(f,"helpers-filled","Y");BX.bind(f,"keyup",BX.delegate(function(){if(!BX.hasClass(f,"helpers-filled")&&f.value.length){BX.addClass(f,"helpers-filled")}else{if(!f.value.length){BX.removeClass(f,"helpers-filled")}}},this))}})}},FormCheckWebForm:function(){var c,b=BX.findChildren(BX("bx-html"),{className:"helpers-form"},true);if(null!=b){b.forEach(BX.delegate(function(d){BX.findChildren(d,BX.delegate(function(f){c=f.tagName;if("hidden"==f.type){return true}if(undefined!=c&&"INPUT"==c&&"submit"==f.type){BX.bind(f,"click",BX.delegate(function(){this.FormEnableValidation(f)},this));BX.bind(f,"touch",BX.delegate(function(){this.FormEnableValidation(f)},this))}if(undefined!=c&&("INPUT"==c||"TEXTAREA"==c)){f.value.length?BX.addClass(f,"helpers-filled"):BX.removeClass(f,"helpers-filled");BX.bind(f,"keyup",BX.delegate(function(){f.value.length?BX.addClass(f,"helpers-filled"):BX.removeClass(f,"helpers-filled")},this))}return false},this),true)},this))}},FormEnableValidation:function(c){var d=BX.findParent(c,{tag:"FORM"},true),b=this.FormGetFieldError(d);if(undefined!=b){if(this.FormIsEnabledToScrollFieldError(d)){this.FormScrollToErrorField(b)}}if(null!=d){BX.addClass(d,"helpers-validation")}},FormGetFieldError:function(e){var c=BX.findChildren(e,{className:"helpers-form-field-error"},true),b,d;c.forEach(function(f){if("none"!=getComputedStyle(f).display){d=f}});if(undefined==d){b=BX.findChild(e,{className:"helpers-form-error"},true);if(null!=b){if("none"!=getComputedStyle(b).display){d=b}}}return d},FormIsEnabledToScrollFieldError:function(b){return"Y"==BX.data(b,"helpers-form-scroll2error")?true:false},FormScrollToErrorField:function(c){var b=c.parentNode.getBoundingClientRect(),e=BX.GetWindowScrollPos(),d=b.top+e.scrollTop-(b.height/2);(new BX.easing({duration:700,start:{scroll:e.scrollTop},finish:{scroll:d},step:function(f){a.scrollTo(0,f.scroll)}})).animate()},FormSubmitAjaxControl:function(){$(document).ajaxSend(BX.delegate(function(){this.FormSubmitDisabled()},this)).ajaxSuccess(BX.delegate(function(){this.FormSubmitEnabled()},this)).ajaxError(BX.delegate(function(){this.FormSubmitEnabled()},this))},FormSubmitDisabled:function(){var c=BX.findChildren(BX("bx-html"),{className:"helpers-form"},true),b;if(null!=c){c.forEach(function(d){b=BX.findChild(d,{tag:"INPUT",attrs:{type:"submit"}},true);if(null!=b){b.disabled=true}})}},FormSubmitEnabled:function(){var c=BX.findChildren(BX("bx-html"),{className:"helpers-form"},true),b;if(null!=c){c.forEach(function(d){b=BX.findChild(d,{tag:"INPUT",attrs:{type:"submit"}},true);if(null!=b){b.disabled=false}})}},FormShowError:function(b){var d,c=this.FormGetFormNode();if(null!=c){d=BX.findChild(c,{className:"helpers-form-error"},true);if(null!=d){d.textContent=b}}},FormCleanError:function(){var c,b=this.FormGetFormNode();if(null!=b){c=BX.findChild(b,{className:"helpers-form-error"},true);if(null!=c){c.textContent=""}}},FormRefreshCaptcha:function(){var b,c=this.FormGetFormNode();if(null!=c){b=BX.findChild(c,{className:"helpers-form-captcha"},true);if(null!=b){BX.SavitskyiHub.BxHelpers.Helpers.Content.Base.refreshCaptcha(b)}}},FormReplaceContent:function(d){var c,b,e=this.FormGetFormNode();if(e.outerHTML){e.outerHTML=d}else{c=BX.create("DIV",{html:"<!--THIS DATA SHOULD BE REPLACED-->"});b=e.parentNode;b.replaceChild(c,e);b.innerHTML=b.innerHTML.replace("<div><!--THIS DATA SHOULD BE REPLACED--></div>",d)}this.FormInitScriptsInNewContent(d)},FormInitScriptsInNewContent:function(d){var e=new DOMParser().parseFromString(d,"text/html"),b=e.getElementsByTagName("script"),c;if(b.length){for(c=0;c<b.length;++c){BX.ajax.processScripts(BX.processHTML(b[c].outerHTML).SCRIPT)}}},FormUpdateEvent:function(){setTimeout(BX.delegate(function(){this.FormCheckWebForm();this.FormCheckFields();if("function"===typeof(helpersContenFormUpdateEvent)){helpersContenFormUpdateEvent()}},this),250)}};BX.ready(function(){BX.SavitskyiHub.BxHelpers.Helpers.Content.Form.FormInit()})})(window);